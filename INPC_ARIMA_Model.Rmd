---
title: "INPC Time Series Forecasting in R"
author: "Heydi"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 📘 Project Summary

This project models Mexico's Consumer Price Index (INPC) from January 2010 to December 2015 using ARIMA time series techniques. The objective is to evaluate the model fit, residual diagnostics, and forecast performance using R.

## 📦 Libraries Used

```{r libraries}
library(TSA)
library(forecast)
library(urca)
library(lmtest)
library(reshape2)
```

## 📂 Load Data

```{r load-data}
INPC <- read.csv("INPC.csv", header = TRUE, stringsAsFactors = TRUE)
INPC <- INPC[1:72,]
head(INPC)
```

## 🔄 Convert to Time Series

```{r ts-conversion}
INPC.ts <- ts(INPC$INPC, start = c(2010, 1), end = c(2015, 12), frequency = 12)
plot(INPC.ts, xlab = "Date", ylab = "INPC")
```

## 📉 First Differencing

```{r diff}
plot(diff(INPC.ts), xlab = "Date", ylab = "Differenced INPC")
```

## 🔍 ACF and PACF Analysis

```{r acf-pacf}
par(mfrow = c(1, 2))
acf(diff(INPC.ts), main = "ACF")
pacf(diff(INPC.ts), main = "PACF")
par(mfrow = c(1, 1))
```

## 🔢 Model Selection

```{r model-selection}
eacf(diff(INPC.ts)) # Optional if TSA is properly configured
auto.arima(INPC.ts)
```

```{r models}
modelo1 <- arima(INPC.ts, order = c(1, 1, 1))
modelo2 <- arima(INPC.ts, order = c(2, 1, 1))
modelo3 <- arima(INPC.ts, order = c(2, 1, 2))
AIC(modelo1, modelo2, modelo3)
```

## ✅ Residual Diagnostics

```{r residuals}
residuals <- modelo3$residuals
plot(residuals, main = "Residuals of ARIMA(2,1,2)")
```

```{r normality}
qqnorm(scale(residuals)); qqline(scale(residuals))
ks.test(scale(residuals), "pnorm")
```

```{r white-noise}
par(mfrow = c(1,2))
acf(residuals, main = "Residual ACF")
pacf(residuals, main = "Residual PACF")
par(mfrow = c(1,1))

Box.test(residuals, lag = 20, type = "Ljung-Box", fitdf = 1)
```

```{r coefficients}
coeftest(modelo3)
confint(modelo3)
```

## 📈 Forecasting

```{r forecast}
model_final <- Arima(INPC.ts, order = c(2, 1, 2))
forecast_values <- forecast(model_final, h = 5)
plot(forecast_values, xlab = "Date", ylab = "INPC")
lines(model_final$fitted, col = "blue", lty = 2)
```

## 📌 Conclusion

The ARIMA(2,1,2) model demonstrates a good fit based on residual diagnostics and AIC comparison. Forecasts appear reasonable and well-behaved. This project showcases the use of classic time series modeling techniques in R applied to macroeconomic data.
